# ─────────────────────────────────────────────────────────────────────────────
# MediaRenamer — docker compose
#
# Quick start:
#   docker compose up --build
#   Open: http://localhost:6080/vnc.html
# ─────────────────────────────────────────────────────────────────────────────
version: "3.9"

services:
  mediarenamer:
    build: .
    image: mediarenamer:latest
    container_name: mediarenamer
    ports:
      - "6080:6080"   # noVNC web interface — open http://localhost:6080/vnc.html
    environment:
      # API keys — set these or use the in-app Settings dialog
      - TMDB_API_KEY=${TMDB_API_KEY:-}
      - TVDB_API_KEY=${TVDB_API_KEY:-}
      - OPENSUBTITLES_API_KEY=${OPENSUBTITLES_API_KEY:-}
      # Display resolution (WxHxDepth)
      - XVFB_RESOLUTION=${XVFB_RESOLUTION:-1280x800x24}
    volumes:
      # Persist API keys and rename history
      - ${HOME}/.mediarenamer:/root/.mediarenamer
      # Your media files (change left side to your actual path)
      - ${MEDIA_DIR:-~/Media}:/media
    restart: "no"
    # Give the container access to shared memory (helps Qt rendering)
    shm_size: "256mb"
